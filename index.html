<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ZeroFlen Lobby v0.2 - Terminal de Observaci√≥n">
    <title>ZeroFlen</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="icono-zeroflen.png">
</head>
<body>
    <!-- ============ GATEKEEPER MODAL ============ -->
    <div id="gatekeeper-modal" class="gatekeeper-modal">
        <div class="gatekeeper-backdrop"></div>
        <div class="gatekeeper-container">
            <div class="gatekeeper-header">
                <h1 class="gatekeeper-title">üîê THE GATEKEEPER</h1>
                <p class="gatekeeper-subtitle">Elige tu identidad observadora</p>
            </div>
            <div class="gatekeeper-form">
                <!-- Nombre -->
                <div class="form-group">
                    <label for="observer-name" class="label">NOMBRE DE OBSERVADOR</label>
                    <input type="text" id="observer-name" class="input-name" placeholder="Ej: AlphaVortex42" maxlength="20" autocomplete="off">
                    <div id="name-status" class="name-status"></div>
                </div>
                <!-- Color -->
                <div class="form-group">
                    <label class="label">FIRMA CROM√ÅTICA</label>
                    <div class="color-palette" id="color-palette"></div>
                    <p id="color-name" class="color-name">Selecciona un color</p>
                </div>
                <!-- Preview -->
                <div class="preview-section">
                    <p class="preview-label">VISTA PREVIA (Neon Breath):</p>
                    <p id="preview-name" class="preview-name breathe">Ingresa tu nombre</p>
                </div>
                <!-- Bot√≥n -->
                <button id="btn-enter" class="btn-enter" disabled>üöÄ ACCEDER AL LOBBY</button>
            </div>
            <div class="gatekeeper-footer">
                <p class="footer-text">Tu identidad es √∫nica y permanente. Elige sabiamente.</p>
            </div>
        </div>
    </div>

    <!-- ============ LAYOUT PRINCIPAL (3 COLUMNAS) ============ -->
    <div class="zeroflen-layout">
        <!-- COLUMNA 1: RANKING -->
        <aside id="ranking-sidebar" class="ranking-sidebar">
            <div class="ranking-header">
                <h3 class="ranking-title">OBSERVADORES</h3>
                <p class="ranking-count" id="observer-count">#0 activos</p>
            </div>
            <div class="ranking-list" id="ranking-list">
                <div class="ranking-entry">Cargando...</div>
            </div>
            <div class="ranking-divider"></div>
            <div class="ranking-current" id="ranking-current"></div>
        </aside>

        <!-- COLUMNA 2: LOBBY -->
        <main id="lobby-main" class="lobby-main">
            <div class="container">
                <!-- Header -->
                <div class="header">
                    <div>
                        <div class="header-title">‚ö° ZEROFLEN</div>
                        <div class="header-subtitle">Lobby v0.2</div>
                    </div>
                    <div class="badges">
                        <div class="badge" id="version-badge">0.2-nucleus</div>
                        <div class="badge" id="timestamp-badge">--:--:--</div>
                    </div>
                </div>

                <!-- Secci√≥n de estado -->
                <div class="status-section">
                    <div class="status-item">
                        <div class="status-label">Tiempo Restante</div>
                        <div class="status-value" id="countdown-value">365d 00h 00m 00s</div>
                        <div class="status-sublabel">El dominio expira en 365 d√≠as</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">Presupuesto Restante</div>
                        <div class="status-value" id="budget-value">$20.00</div>
                        <div class="status-sublabel">de $20.00 inicial</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">Total Invertido</div>
                        <div class="status-value" id="invested-value">$0.00</div>
                        <div class="status-sublabel">en infraestructura</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">Estado Protecci√≥n</div>
                        <div class="status-value" id="status-badge">PROTECTED</div>
                        <div class="status-sublabel">saldo seguro</div>
                    </div>
                </div>

                <!-- Evoluci√≥n -->
                <div class="evolution-section">
                    <div class="evolution-label">Estado de Evoluci√≥n</div>
                    <div id="evolution-text">Inicializando...</div>
                </div>

                <!-- Bit√°cora -->
                <div class="logs-section">
                    <div class="logs-title">Bit√°cora de Eventos</div>
                    <div id="log-container">
                        <div class="logs-empty">Sin eventos registrados</div>
                    </div>
                </div>

                <!-- MINI REPRODUCTOR (colapsable) con barra de progreso -->
                <div class="mini-player-container" id="mini-player-container" style="display: none;">
                    <div class="mini-player">
                        <div class="mini-player-top">
                            <div class="mini-player-info">
                                <img class="mini-player-cover" id="mini-player-cover" src="" alt="cover">
                                <span class="mini-player-title" id="mini-player-title">-</span>
                            </div>
                            <div class="mini-player-controls">
                                <button class="mini-btn" id="mini-prev">‚èÆ</button>
                                <button class="mini-btn" id="mini-play-pause">‚ñ∂</button>
                                <button class="mini-btn" id="mini-next">‚è≠</button>
                                <button class="mini-btn" id="mini-close">‚úï</button>
                            </div>
                        </div>
                        <div class="mini-player-progress-container" id="mini-progress-container">
                            <div class="mini-progress-bar" id="mini-progress-bar" style="width: 0%;"></div>
                            <div class="progress-tooltip" id="mini-progress-tooltip" style="display: none;">0:00</div>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div class="footer">
                    <button class="btn" id="btn-reload" onclick="if(window.zeroFlenUI) window.zeroFlenUI.recargar_datos()">üîÑ Recargar</button>
                    <button class="btn" id="btn-status" onclick="if(window.zeroFlenUI) window.zeroFlenUI.mostrar_status()">üìä Estado</button>
                </div>
            </div>
        </main>

        <!-- COLUMNA 3: MEN√ö -->
        <aside id="menu-sidebar" class="menu-sidebar">
            <div class="menu-header">
                <button class="profile-btn" id="profile-btn">
                    <span class="profile-name" id="profile-name">Flen</span>
                    <span class="profile-color-dot" id="profile-color-dot"></span>
                </button>
                <div class="menu-actions">
                    <button class="action-btn" id="btn-new">+</button>
                    <button class="action-btn" id="btn-menu">‚ãØ</button>
                </div>
            </div>
            <button class="btn-galeria" id="btn-galeria">üéµ MUTACI√ìN M√öSICA</button>
            <!-- NUEVO BOT√ìN COMUNIDAD -->
            <button class="btn-comunidad" id="btn-comunidad">üì° COMUNIDAD</button>
            <div class="menu-gallery-preview" id="menu-gallery-preview"></div>
        </aside>
    </div>

    <!-- BOTONES FLOTANTES PARA M√ìVIL -->
    <button id="btn-toggle-ranking-mobile" class="btn-toggle-ranking-mobile">üìä</button>
    <button id="btn-toggle-menu-mobile" class="btn-toggle-menu-mobile">üéµ</button>

    <!-- Bot√≥n flotante de m√∫sica (visible cuando el reproductor est√° colapsado) -->
    <button id="music-toggle-btn" class="music-toggle-btn" style="display: none;">
        <img id="music-toggle-icon" src="" alt="music">
    </button>

    <!-- ============ MODAL COMUNIDAD (nuevo) ============ -->
    <div id="comunidad-modal" class="comunidad-modal">
        <div class="comunidad-overlay"></div>
        <div class="comunidad-container">
            <div class="comunidad-header">
                <h2>üì° FRECUENCIA ZERO</h2>
                <button class="btn-close-comunidad">‚úï</button>
            </div>
            <div class="comunidad-mensajes" id="comunidad-mensajes">
                <!-- Los mensajes se cargar√°n aqu√≠ -->
            </div>
            <div class="comunidad-input-area">
                <input type="text" id="comunidad-input" class="comunidad-input" placeholder="Escribe tu mensaje..." maxlength="200">
                <button class="btn-transmitir" id="btn-transmitir">TRANSMITIR</button>
            </div>
            <div class="comunidad-footer">
                <button class="btn-volver-comunidad">‚óÑ VOLVER AL LOBBY</button>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="script.js"></script>
</body>
</html>
